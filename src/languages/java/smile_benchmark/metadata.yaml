# metadata.yaml for Java KMeans CPU Benchmark
name: smile_benchmark
type: macrobenchmark
language: Java
domain:
  - machine_learning
  - clustering

setup:
  command: python3 setup.py
  parameters:
    maven_goal:
      description: Maven goal to build the project
      default: "-q -DskipTests clean package"
    smile_version:
      description: Version of the Smile library to use
      default: "2.6.0"

workloads:
  - name: smile_kmeans
    description: >
      Run a KMeans clustering CPU benchmark in Java using the Smile library.
      The benchmark generates random data in memory and performs KMeans clustering
      on multiple copies (parallel threads), to evaluate CPU performance under
      compute-intensive machine learning workloads.
    data: 
      command: python3 generate_data.py --task kmeans
      parameters:
        samples:
          description: Number of samples to generate
          default: 100000
        features:
          description: Number of features per sample
          default: 100
        output:
          description: Output directory for generated data
          default: ./data
        seed:
          description: Random seed for reproducibility
          default: 42
    command: python3 run_benchmark.py --workload kmeans
    parameters:
      data:
        description: Path to input CSV data
        default: ./data/kmeans.csv
      clusters:
        description: Number of clusters for KMeans
        default: 100
      threads:
        description: Number of copies (threads) to run in parallel
        default: 1
      iters:
        description: Number of iterations for the benchmark
        default: 6

characteristics:
  IO_effects: low
  single_machine: true
  network_effects: none
  cpu_bound: true
  memory_intensive: low

tags:
  - java
  - machine_learning
  - kmeans
  - smile

dependencies:
  java: ">=17"
  maven: ">=3.6"
  smile: "3.0.1"
  python: ">=3.6"
  numpy: ">=1.18"
