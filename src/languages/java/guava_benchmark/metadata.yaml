name: guava_benchmark
type: macrobenchmark
language: Java
domain:
  - software development

setup:
  command: ./scripts/setup.sh

# Updated workloads aligned with new runner (BenchmarkRunner) and script (run_benchmark.sh)
workloads:
  - name: guava_event
    description: Event aggregation (Multimap + Multiset) with top-K frequency extraction and category hashing.
    command: ./scripts/run_benchmark.sh --workload event
    parameters:
      workload:
        description: Fixed workload identifier
        default: event
      dataSize:
        description: Number of events generated (controls window & users)
        default: 200000   
      threads:
        description: Parallel worker threads
        default: 1
      iterations:
        description: Per-thread iterations (batches processed)
        default: 100000
      warmupIterations:
        description: Optional warmup iteration count (override heuristic)
        default: 5
      noWarmup:
        description: Disable warmup when present
        default: false

  - name: guava_graph
    description: Directed graph traversal (multi-source BFS, topological sort, cycle detection) using Guava Graph.
    command: ./scripts/run_benchmark.sh --workload graph
    parameters:
      workload:
        description: Fixed workload identifier
        default: graph
      dataSize:
        description: Logical size factor (affects nodeCount ~ dataSize/50)
        default: 400000  
      threads:
        description: Parallel worker threads
        default: 1
      iterations:
        description: Per-thread iterations (full traversal cycles)
        default: 15000 
      warmupIterations:
        description: Optional warmup iteration count
        default: 5
      noWarmup:
        description: Disable warmup when present
        default: false

  - name: guava_bloom
    description: Bloom filter insertion/query workload with chained hashing for CPU stress.
    command: ./scripts/run_benchmark.sh --workload bloom
    parameters:
      workload:
        description: Fixed workload identifier
        default: bloom
      dataSize:
        description: Number of operations per iteration (also drives expected insertions)
        default: 400000 
      threads:
        description: Parallel worker threads
        default: 1
      iterations:
        description: Per-thread iterations
        default: 2000 
      warmupIterations:
        description: Optional warmup iteration count
        default: 5
      noWarmup:
        description: Disable warmup when present
        default: false

  - name: guava_cache
    description: Custom concurrent cache simulation with hot/cold key distribution and hash-heavy value computation.
    command: ./scripts/run_benchmark.sh --workload cache
    parameters:
      workload:
        description: Fixed workload identifier
        default: cache
      dataSize:
        description: Keys accessed per iteration
        default: 100000 
      threads:
        description: Parallel worker threads
        default: 1
      iterations:
        description: Per-thread iterations
        default: 1000
      warmupIterations:
        description: Optional warmup iteration count
        default: 5
      noWarmup:
        description: Disable warmup when present
        default: false

  - name: guava_immutable
    description: Immutable snapshot diffs/intersections over large base arrays with hashing reductions.
    command: ./scripts/run_benchmark.sh --workload immutable
    parameters:
      workload:
        description: Fixed workload identifier
        default: immutable
      dataSize:
        description: Size of base int array
        default: 400000 
      threads:
        description: Parallel worker threads
        default: 1
      iterations:
        description: Per-thread iterations
        default: 33000
      warmupIterations:
        description: Optional warmup iteration count
        default: 5
      noWarmup:
        description: Disable warmup when present
        default: false

characteristics:
  IO_effects: low        # Pure in-memory computations
  single_machine: true
  network_effects: false
  memory_bound: low   # Uses sizable arrays/maps but aims to limit peak footprint

tags:
  - java
  - guava
  - collections
  - hashing
  - cache
  - graph
  - bloomfilter

dependencies:
  java: ">=11"
  guava: "33.4.8-jre"
