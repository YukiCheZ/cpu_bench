# metadata.yaml for Cassandra CPU Benchmark
name: cassandra_cpu_benchmark
type: macrobenchmark
language: Java
domain:
  - database
  - storage

setup:
  command: ./setup.sh

workloads:
  - name: cassandra_stress_read
    summary: Cassandra NoSQL database read performance benchmark
    action: execute high-concurrency read operations on Cassandra
    description: >
      Launch a local Apache Cassandra database instance and populate it with a large dataset using the `cassandra-stress` tool.
      Execute a read-heavy benchmark workload with high concurrency, optionally pinning the client to specific CPU cores.
      Measure the operation rate and latency of read requests to evaluate the CPU's efficiency in handling NoSQL database queries.
    command: python3 run_benchmark.py
    parameters:
      write-n:
        full_name: write operations count
        description: Total number of write operations for pre-loading data
        default: 2000000
      write-threads:
        full_name: write threads count
        description: Number of threads for write pre-load
        default: 128
      read-n:
        full_name: read operations count
        description: Total number of read operations per iteration
        default: 2000000
      read-threads:
        full_name: read threads count
        description: Number of threads for read operations
        default: 128
      threads:
        full_name: number of cpu cores
        description: Limit the number of CPU cores to use
        default: 1
      iters:
        full_name: number of iterations
        description: Number of iterations to run the read benchmark
        default: 25

characteristics:
  IO_effects: medium
  single_machine: true
  network_effects: loopback_only
  cpu_bound: true
  memory_intensive: medium

tags:
  - cassandra
  - database
  - storage

dependencies:
  python: ">=3.8"
  java: ">=11"
  cassandra: "4.0.18"
