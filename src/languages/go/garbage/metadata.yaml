# metadata.yaml for Garbage Collector Benchmark
name: gc_garbage
type: macrobenchmark
language: Go
domain:
  - runtime
  - garbage_collection
  - cpu_performance

workloads:
  - name: gc_garbage
    summary: Go garbage collector stress test via parsing
    action: repeatedly parse Go source files to generate garbage
    description: >
      Stress the Go runtime's garbage collector by repeatedly parsing large Go source files in memory.
      Generate high rates of short-lived object allocations and discard parse trees to trigger frequent GC cycles.
      Measure the efficiency and latency of the garbage collection process under concurrent memory pressure.
    data: 
      command: python3 generate_data.py 
      parameters:
        size:
          full_name: source file size
          description: Size of the generated Go source file in lines
          default: 100000
        output: 
          full_name: output file
          description: Path to the output Go source file
          default: ./data/input.go
    command: go run garbage.go
    parameters:
      input:
        full_name: input file
        description: Path to the Go source file to parse
        default: ./data/input.go
      iterations:
        full_name: iterations
        description: Number of parse iterations to run
        default: 1000
      threads:
        full_name: threads
        description: Number of threads
        default: 1

characteristics:
  IO_effects: low
  single_machine: true
  network_effects: none
  cpu_bound: true
  memory_bound: high

tags:
  - cpu
  - garbage_collector
  - runtime
  - concurrency
  - go

dependencies:
  go: "1.24.5"
