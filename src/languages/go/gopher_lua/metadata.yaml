# metadata.yaml for Gopher-Lua KNucleotide Benchmark
name: gopher_lua
type: macrobenchmark
language: Go
domain:
  - scripting
  - interpreter
  - bioinformatics

setup:
  command: ./setup.sh

workloads:
  - name: gopher_lua
    summary: Gopher-Lua interpreter execution of k-nucleotide analysis
    action: execute Lua script for DNA k-mer frequency counting
    description: >
      Invoke the Gopher-Lua interpreter to execute the k-nucleotide bioinformatics benchmark.
      Load a DNA sequence into the Lua virtual machine and perform intensive string processing to calculate k-mer frequencies and count specific nucleotide fragments.
      Measure the execution time to evaluate the performance of the Go-based Lua implementation in handling hash table operations and string manipulation.
    data: 
      command: python3 scripts/generate_data.py
      parameters:
        size:
          description: Generate DNA input for gopher-lua knucleotide benchmark
          default: 1000000
        output: 
          description: Output file name (will be placed in data/ directory by default)
          default: dna_input.fasta
    command: go run src/main.go
    parameters:
      lua:
        description: Path to the Lua script file
        default: ./knucleotide.lua
      data:
        description: Path to the input DNA file
        default: ./data/dna_input.fasta
      threads:
        description: Number of threads to use
        default: 1
      iters:
        description: Number of iterations per thread
        default: 100
      

characteristics:
  IO_effects: low
  single_machine: true
  network_effects: none
  cpu_bound: true

tags:
  - cpu
  - lua
  - interpreter
  - scripting
  - bioinformatics

dependencies:
  go: "1.24.5"