# metadata.yaml for Go Compiler Benchmark
name: go_compiler
type: macrobenchmark
language: Go
domain:
  - compilation
  - performance
  - build_system

workloads:
  - name: go_compiler
    summary: Go toolchain compilation performance benchmark
    action: compile generated Go source packages
    description: >
      Execute the Go compiler to build a large set of synthetic Go packages containing complex functions and structures.
      Perform a full rebuild by forcing package recompilation and optionally clearing the build cache to simulate a clean build environment.
      Measure the compilation time to evaluate the multi-threaded performance of the Go toolchain and CPU under heavy build workloads.
    data:
      command: python3 generate_data.py
      parameters:
        out:
          full_name: output directory
          description: Output directory for generated Go source files
          default: ./data
        pkgs:
          full_name: number of packages
          description: Number of packages to generate
          default: 100
        files:
          full_name: files per package
          description: Number of files per package
          default: 5
        structs:
          full_name: structs per file
          description: Number of structs per file
          default: 20
        funcs:
          full_name: functions per file
          description: Number of functions per file
          default: 50
        complex:
          full_name: complexity level
          description: Complexity level of generated functions
          default: 200
        module:
          full_name: module name
          description: Module name used in go.mod
          default: data
    command: python3 run_benchmark.py
    parameters:
      data-dir: 
        full_name: data directory
        description: Directory containing Go source files to compile
        default: ./data
      iterations:
        full_name: iterations
        description: Number of times to repeat the benchmark
        default: 5
      threads:
        full_name: threads
        description: Number of parallel build threads
        default: 1
      no_clean:
        full_name: skip clean
        description: Skip cleaning build cache before each run
        default: false

characteristics:
  IO_effects: moderate
  single_machine: true
  network_effects: none
  cpu_bound: true

tags:
  - cpu
  - compiler
  - build
  - parallel
  - go

dependencies:
  python: ">=3.7"
  go: ">=1.24.5"
