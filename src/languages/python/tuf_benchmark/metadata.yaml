# metadata.yaml for TUF CPU Benchmark
name: tuf_benchmark
type: microbenchmark
language: Python
domain:
  - security
  - metadata
  - hashing
  - integrity

setup:
  command: python3 setup.py

workloads:
  - name: tuf-metadata
    summary: TUF metadata parsing and SHA256 hashing benchmark
    action: parse TUF metadata and compute SHA256 hashes
    description: >
      Load repository metadata and target files into memory to simulate a secure software update process.
      Parse the metadata using The Update Framework (TUF) API to validate security information.
      Compute SHA256 hashes of the target files to verify data integrity and measure the CPU's cryptographic and parsing performance.
    data:
      command: python3 generate_data.py
      parameters:
        size:
          full_name: target data size
          description: Total target data size in bytes
          default: 536870912   # 512 MiB
        meta:
          full_name: number of metadata files
          description: Number of metadata files, 
          default: 10
        targets:
          full_name: number of target files
          description: Number of target files
          default: 5
    command: python3 run_benchmark.py
    parameters:
      threads:
        full_name: threads
        description: Number of parallel worker processes
        default: 1
      iters:
        full_name: iterations
        description: Iterations per worker
        default: 1000
      warmup:
        full_name: warmup iterations
        description: Warmup iterations per worker
        default: 3
      repo:
        full_name: repository path
        description: Path to test repository
        default: ./data

characteristics:
  IO_effects: minimal          # Metadata and target files are generated in memory
  single_machine: true         
  network_effects: none        # No network access
  cpu_bound: true              # JSON parsing + SHA256 hashing
  memory_bound: true           # Handling multi-GB target files in memory
  memory_effects: medium      

tags:
  - hashing
  - json
  - parsing
  - integrity
  - tuf
  - security

dependencies:
  python: ">=3.8"
  securesystemslib: ">=0.30"   # indirect dependency of TUF
  tuf: ">=2.0"
