# metadata.yaml for RocksDB CPU Benchmark
name: rocksdb_benchmark
type: macrobenchmark
language: C++
domain:
  - database
  - key-value

setup:
  command: ./setup.sh
  parameters:
    compiler:
      full_name: compiler
      description: Compiler to use (gcc or clang)
      default: gcc
    opt:
      full_name: optimization level
      description: Optimization level (O0, O1, O2, O3)
      default: -O3

workloads:
  - name: rocksdb_cpu
    summary: RocksDB key-value store operations with Snappy compression
    action: execute mixed read-write database transactions
    description: >
      Execute a comprehensive sequence of RocksDB operations including sequential fills, random reads, random writes, and updates.
      Apply Snappy compression to data blocks to increase CPU utilization during storage and retrieval tasks.
      Measure the throughput of key-value manipulations and hashing algorithms like XXH3 to evaluate the performance of embedded database workloads.
    command: python3 run_benchmark.py
    parameters:
      num:
        full_name: number of keys
        description: Number of key-value pairs
        default: 4000000
      threads:
        full_name: threads
        description: Number of concurrent threads
        default: 1
      warmup:
        full_name: warmup iterations
        description: Number of warmup iterations before timing
        default: 1
      iters:
        full_name: iterations
        description: Number of timed iterations
        default: 1

characteristics:
  IO_effects: medium
  single_machine: true
  network_effects: none
  cpu_bound: true
  memory_intensive: low

tags:
  - database
  - key-value
  - rocksdb

dependencies:
  gcc: ">=11.0"
  clang: ">=14.0"
  python: ">=3.8"
  rocksdb: ">=10.0"
