# metadata.yaml for LAPACK CPU Benchmark
name: lapack_cpu_benchmark
type: microbenchmark
language: C
domain:
  - linear_algebra
  - scientific_computing

setup:
  command: ./setup.sh
  parameters:
    compiler:
      description: Compiler to use (gcc or clang)
      default: gcc
    opt:
      description: Optimization level (-O0, -O1, -O2, -O3, -Ofast)
      default: -O3

workloads:
  - name: lapack_solve
    description: >
      Benchmark for solving linear systems using LAPACK.
    command: ./bin/lapack_benchmark --mode solve
    parameters:
      size:
        description: Size of the matrix (number of rows/columns)
        default: 2048
      iters:
        description: Number of iterations to run
        default: 3000
      warmup:
        description: Number of warmup iterations
        default: 1
      threads:
        description: Number of concurrent threads to use
        default: 1
      seed:
        description: Seed for random number generation
        default: 42

  - name: lapack_eigen
    description: >
      Benchmark for computing eigenvalues and eigenvectors using LAPACK.
    command: ./bin/lapack_benchmark --mode eigen
    parameters:
      size:
        description: Size of the matrix (number of rows/columns)
        default: 2048
      iters:
        description: Number of iterations to run
        default: 30
      warmup:
        description: Number of warmup iterations
        default: 1
      threads:
        description: Number of concurrent threads to use
        default: 1
      seed:
        description: Seed for random number generation
        default: 42

  - name: lapack_svd
    description: >
      Benchmark for computing singular value decomposition using LAPACK.
    command: ./bin/lapack_benchmark --mode svd
    parameters:
      size:
        description: Size of the matrix (number of rows/columns)
        default: 2048
      iters:
        description: Number of iterations to run
        default: 9
      warmup:
        description: Number of warmup iterations
        default: 1 
      threads:
        description: Number of concurrent threads to use
        default: 1
      seed:
        description: Seed for random number generation
        default: 42

characteristics:
  IO_effects: low
  single_machine: true
  network_effects: none
  cpu_bound: true
  memory_intensive: medium

tags:
  - linear_algebra
  - scientific_computing
  - lapack

dependencies:
  python: ">=3.8"
  lapack: "liblapacke-dev"
  blas: "libblas-dev"
  lapacke: "liblapack-dev"
  make: ">=4.0"
