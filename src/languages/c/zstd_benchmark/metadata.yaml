# metadata.yaml for Zstd CPU Benchmark
name: zstd_benchmark
type: macrobenchmark
language: C
domain:
  - compression
  - decompression

setup:
  command: ./setup.sh
  parameters:
    compiler:
      description: Compiler to use for building the benchmark
      default: gcc
    opt:
      description: Optimization level for compilation
      default: -O3

workloads:
  - name: zstd
    summary: Zstandard data compression and decompression benchmark
    action: perform Zstd compression and decompression cycles
    description: >
      Load a pre-generated binary dataset and execute the Zstandard (zstd) algorithm for data compression and decompression.
      Perform high-level compression and subsequent decompression using parallel processes to stress test CPU integer performance and memory bandwidth.
      Measure the latency and throughput of the compression cycles to evaluate the system's efficiency in handling intensive data processing tasks.
    data:
      command: python3 generate_data.py
      parameters:
        size: 
          description: Size of the data file to generate (in KB)
          default: 50000
    command: python3 run_benchmark.py
    parameters:
      input:
        description: Input file for benchmark
        default: ./data/zstd_input.bin
      level:
        description: Compression level (1-19)
        default: 19
      threads:
        description: Number of threads to use
        default: 1
      warmup:
        description: Number of warmup iterations before timing
        default: 1
      iters:
        description: Number of timed iterations
        default: 120
      zstd-bin:
        description: Path to zstd executable
        default: ./bin/zstd

characteristics:
  IO_effects: low
  single_machine: true
  network_effects: none
  cpu_bound: true
  memory_intensive: low

tags:
  - compression
  - decompression
  - zstd

dependencies:
  python: ">=3.8"
  zstd: ">=1.5"
