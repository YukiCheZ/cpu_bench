# metadata.yaml for Zstd CPU Benchmark
name: zstd_benchmark
type: macrobenchmark
language: C
domain:
  - compression
  - decompression

setup:
  command: ./setup.sh
  parameters:
    compiler:
      full_name: compiler
      description: Compiler to use for building the benchmark
      default: gcc
    opt:
      full_name: optimization level
      description: Optimization level for compilation
      default: -O3

workloads:
  - name: zstd
    summary: Zstandard data compression and decompression benchmark
    action: perform Zstd compression and decompression cycles
    description: >
      Load a pre-generated binary dataset and execute the Zstandard (zstd) algorithm for data compression and decompression.
      Perform high-level compression and subsequent decompression using parallel processes to stress test CPU integer performance and memory bandwidth.
      Measure the latency and throughput of the compression cycles to evaluate the system's efficiency in handling intensive data processing tasks.
    data:
      command: python3 generate_data.py
      parameters:
        size: 
          full_name: data size
          description: Size of the data file to generate
          default: 50000
    command: python3 run_benchmark.py
    parameters:
      input:
        full_name: input file
        description: Input file for benchmark
        default: ./data/zstd_input.bin
      level:
        full_name: compression level
        description: Compression level
        default: 19
      threads:
        full_name: threads
        description: Number of threads to use
        default: 1
      warmup:
        full_name: warmup iterations
        description: Number of warmup iterations before timing
        default: 1
      iters:
        full_name: iterations
        description: Number of timed iterations
        default: 120
      zstd-bin:
        full_name: zstd binary path
        description: Path to zstd executable
        default: ./bin/zstd

characteristics:
  IO_effects: low
  single_machine: true
  network_effects: none
  cpu_bound: true
  memory_intensive: low

tags:
  - compression
  - decompression
  - zstd

dependencies:
  python: ">=3.8"
  zstd: ">=1.5"
